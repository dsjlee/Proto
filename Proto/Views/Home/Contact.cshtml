@{
    ViewBag.Title = "Contact";
}
<h2>@ViewBag.Title.</h2>
<h3>@ViewBag.Message</h3>

<address>
    One Microsoft Way<br />
    Redmond, WA 98052-6399<br />
    <abbr title="Phone">P:</abbr>
    425.555.0100
</address>

<address>
    <strong>Support:</strong>   <a href="mailto:Support@example.com">Support@example.com</a><br />
    <strong>Marketing:</strong> <a href="mailto:Marketing@example.com">Marketing@example.com</a>
</address>

<p id="progress">

</p>

@section Scripts {
<script>
    $(function () {

        initProgress();

        function initProgress() {
            var source = new EventSource('@Url.Action("Progress")');

            source.onopen = function (event) {
                $('#progress').html('Connection Opened');
            };
            source.onerror = function (event) {
                console.log(source.readyState);
                if (event.eventPhase == EventSource.CLOSED) {
                    //console.log('Connection Closed');
                    //$('#progress').html('Connection Closed');
                }
            };
            source.onmessage = function (event) {
                $('#progress').html(event.data);
                if (event.data == '100%') {
                    source.close();
                }
            };
        }
    });
</script>    
}